(function(e){function t(t){for(var r,s,o=t[0],l=t[1],c=t[2],d=0,p=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&p.push(n[s][0]),n[s]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);u&&u(t);while(p.length)p.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],r=!0,o=1;o<a.length;o++){var l=a[o];0!==n[l]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=a[0]))}return e}var r={},n={app:0},i=[];function s(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=r,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(a,r,function(t){return e[t]}.bind(null,r));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("cd49")},"05f5":function(e,t,a){},"0ebf":function(e,t,a){"use strict";var r=a("c938"),n=a.n(r);n.a},"176d":function(e,t,a){},"422b":function(e,t,a){"use strict";var r=a("757b"),n=a.n(r);n.a},"4c96":function(e,t,a){},"542e":function(e,t,a){"use strict";var r=a("5ef9"),n=a.n(r);n.a},"5c0b":function(e,t,a){"use strict";var r=a("9c0c"),n=a.n(r);n.a},"5ef9":function(e,t,a){},"6f0d":function(e,t,a){},"74d3":function(e,t,a){"use strict";var r=a("a86b"),n=a.n(r);n.a},"757b":function(e,t,a){},"76fe":function(e,t,a){"use strict";var r=a("8213"),n=a.n(r);n.a},8213:function(e,t,a){},"907f":function(e,t,a){"use strict";var r=a("05f5"),n=a.n(r);n.a},"9c0c":function(e,t,a){},a071:function(e,t,a){"use strict";var r=a("c25f"),n=a.n(r);n.a},a86b:function(e,t,a){},c18d:function(e,t,a){"use strict";var r=a("6f0d"),n=a.n(r);n.a},c25f:function(e,t,a){},c938:function(e,t,a){},c999:function(e,t,a){"use strict";var r=a("4c96"),n=a.n(r);n.a},cd49:function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("v-app-bar",{attrs:{app:"",color:"primary",dark:""}},[r("div",{staticClass:"d-flex align-center"},[r("v-img",{attrs:{alt:"BinanceTracker",contain:"",src:a("cf05"),transition:"scale-transition",height:"45",width:"50"}}),r("div",{staticClass:"text-h5"})],1),r("v-spacer"),e.isLoggedOn?e._e():r("v-btn",{attrs:{to:{name:"login"}}},[e._v("Login")]),e.isLoggedOn?r("v-btn",{on:{click:e.handleLogout}},[e._v("Logout")]):e._e()],1),e.hideControls?e._e():r("drawer"),r("v-main",[r("router-view")],1),r("loader")],1)},i=[],s=(a("b0c0"),a("d4ec")),o=a("bee2"),l=a("262e"),c=a("2caf"),u=a("9ab4"),d=a("60a3"),p=a("4bb5"),v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-overlay",{staticClass:"loading-indicator",attrs:{value:e.loading,"z-index":"999"}},[a("v-progress-circular",{attrs:{indeterminate:"",size:"64"}}),e.message?a("div",{staticClass:"text-h5"},[e._v(e._s(e.message))]):e._e()],1)},f=[],h=function(e){Object(l["a"])(a,e);var t=Object(c["a"])(a);function a(){return Object(s["a"])(this,a),t.apply(this,arguments)}return a}(d["d"]);Object(u["a"])([Object(p["c"])("loading")],h.prototype,"loading",void 0),Object(u["a"])([Object(p["c"])("loadingMessage")],h.prototype,"message",void 0),h=Object(u["a"])([Object(d["a"])({components:{}})],h);var m=h,b=m,g=(a("a071"),a("2877")),O=a("6544"),_=a.n(O),y=a("a797"),k=a("490a"),j=Object(g["a"])(b,v,f,!1,null,null,null),x=j.exports;_()(j,{VOverlay:y["a"],VProgressCircular:k["a"]});var w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.user&&"admin"===e.user.role?a("v-navigation-drawer",{attrs:{app:"",permanent:"","expand-on-hover":""},scopedSlots:e._u([{key:"append",fn:function(){return[a("div",{staticClass:"pa-2"},[a("v-btn",{attrs:{block:""},on:{click:e.handleLogout}},[e._v("Logout")])],1)]},proxy:!0}],null,!1,1319748372)},[a("drawer-account"),a("v-divider"),a("v-list",{attrs:{nav:"",dense:""}},e._l(e.routes,(function(t,r){return a("v-list-item",{key:r,attrs:{link:"",to:t.url}},[a("v-list-item-icon",[a("v-icon",[e._v(e._s(t.icon))])],1),a("v-list-item-title",[e._v(e._s(t.title))])],1)})),1)],1):e._e()},S=[],C=(a("4de4"),a("d81d"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.user?a("v-list",[a("v-list-item",{staticClass:"px-2"},[a("v-list-item-avatar",[a("gravatar",{attrs:{email:e.user.email,defaultImage:"mp",size:100}})],1)],1),a("v-list-item",{attrs:{link:""}},[a("v-list-item-content",[a("v-list-item-title",{staticClass:"title"},[e._v(e._s(e.user.name)+" ["+e._s(e.user.role)+"]")]),a("v-list-item-subtitle",[e._v(e._s(e.user.email))])],1)],1)],1):e._e()}),P=[],L=a("e06a"),E=a.n(L),T=function(e){Object(l["a"])(a,e);var t=Object(c["a"])(a);function a(){return Object(s["a"])(this,a),t.apply(this,arguments)}return a}(d["d"]);Object(u["a"])([Object(p["c"])("user")],T.prototype,"user",void 0),T=Object(u["a"])([Object(d["a"])({components:{Gravatar:E.a}})],T);var V=T,$=V,A=a("8860"),I=a("da13"),R=a("8270"),N=a("5d23"),D=Object(g["a"])($,C,P,!1,null,null,null),U=D.exports;_()(D,{VList:A["a"],VListItem:I["a"],VListItemAvatar:R["a"],VListItemContent:N["a"],VListItemSubtitle:N["b"],VListItemTitle:N["c"]});var q={LOADING:"LOADING",SET_USER:"SET_USER",SET_AUTH_TOKEN:"SET_AUTH_TOKEN",SET_SIGNALS:"SET_SIGNALS",SET_AVAILABLE_SIGNALS:"SET_AVAILABLE_SIGNALS"},F={LOGIN:"LOGIN",LOGOUT:"LOGOUT",CHECK_AUTH_TOKEN:"CHECK_AUTH_TOKEN",LOAD_SIGNALS:"LOAD_SIGNALS"},H=function(e){e.commit(q.SET_AUTH_TOKEN,{token:""}),e.commit(q.SET_USER,{user:null})},G=function(e){Object(l["a"])(a,e);var t=Object(c["a"])(a);function a(){return Object(s["a"])(this,a),t.apply(this,arguments)}return Object(o["a"])(a,[{key:"handleLogout",value:function(){H(this.$store)}},{key:"routes",get:function(){var e,t=null===(e=this.$router.options)||void 0===e?void 0:e.routes;return t?t.map((function(e){var t=e.meta;return!(!t||!t.showInMenu)&&{title:t.title||e.name,url:e.path,icon:t.icon}})).filter((function(e){return!!e})):[]}}]),a}(d["d"]);Object(u["a"])([Object(p["c"])("user")],G.prototype,"user",void 0),G=Object(u["a"])([Object(d["a"])({components:{DrawerAccount:U}})],G);var B=G,M=B,K=(a("74d3"),a("8336")),J=a("ce7e"),Y=a("132d"),W=a("34c3"),z=a("f774"),Z=Object(g["a"])(M,w,S,!1,null,"64b3e475",null),Q=Z.exports;_()(Z,{VBtn:K["a"],VDivider:J["a"],VIcon:Y["a"],VList:A["a"],VListItem:I["a"],VListItemIcon:W["a"],VListItemTitle:N["c"],VNavigationDrawer:z["a"]});a("c740"),a("4160"),a("a15b"),a("159b");var X=a("5530"),ee=a("faa1"),te=a("d096"),ae=a("5c7d"),re=a.n(ae),ne=(a("99af"),a("2f62")),ie=a("0e44"),se={loading:!1,loadingMessage:"",user:null,token:null,signals:[],available:[]},oe=a("ade3"),le=(a("96cf"),a("1da1")),ce=a("8c4f"),ue=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"Account--Login fill-height",attrs:{fluid:""}},[a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"12",sm:"8",md:"4"}},[a("v-card",{staticClass:"elevation-12"},[a("v-toolbar",{attrs:{color:"primary",dark:"",flat:""}},[a("v-toolbar-title",[e._v("Login form")])],1),a("v-card-text",[a("v-form",[a("v-text-field",{attrs:{label:"Login",name:"login","prepend-icon":"mdi-account",type:"text"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),a("v-text-field",{attrs:{id:"password",label:"Password",name:"password","prepend-icon":"mdi-lock",type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary"},on:{click:e.handleLogin}},[e._v("Login")])],1)],1)],1)],1)],1)},de=[],pe=function(e){Object(l["a"])(a,e);var t=Object(c["a"])(a);function a(){var e;return Object(s["a"])(this,a),e=t.apply(this,arguments),e.username="",e.password="",e}return Object(o["a"])(a,[{key:"handleLogin",value:function(){this.login({username:this.username,password:this.password})}}]),a}(d["d"]);Object(u["a"])([Object(p["a"])(F.LOGIN)],pe.prototype,"login",void 0),pe=Object(u["a"])([Object(d["a"])({components:{}})],pe);var ve=pe,fe=ve,he=a("b0af"),me=a("99d9"),be=a("62ad"),ge=a("a523"),Oe=a("4bd4"),_e=a("0fd9"),ye=a("2fa4"),ke=a("8654"),je=a("71d9"),xe=a("2a7f"),we=Object(g["a"])(fe,ue,de,!1,null,null,null),Se=we.exports;_()(we,{VBtn:K["a"],VCard:he["a"],VCardActions:me["a"],VCardText:me["b"],VCol:be["a"],VContainer:ge["a"],VForm:Oe["a"],VRow:_e["a"],VSpacer:ye["a"],VTextField:ke["a"],VToolbar:je["a"],VToolbarTitle:xe["a"]});var Ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"Dashboard",attrs:{fluid:""}},[a("v-custom-table",{attrs:{title:"Signals",headers:e.headers,items:e.items,perPage:e.pagination.perPage,total:e.pagination.total,loading:e.loading,onOptionsChange:e.handleTableChange,onSearchChange:e.handleTableSearch,onRowClick:e.handleRowClick,onRefresh:e.fetch,newItemUrl:"/signals/new"},scopedSlots:e._u([{key:"item",fn:function(e){var t=e.item,r=e.index;return[a("list-signal-row",{attrs:{value:t,odd:!(r%2)}})]}}])})],1)},Pe=[],Le=(a("ac1f"),a("841c"),function(e){Object(l["a"])(a,e);var t=Object(c["a"])(a);function a(){return Object(s["a"])(this,a),t.apply(this,arguments)}return Object(o["a"])(a,[{key:"setLoading",value:function(e){this.$store.commit(q.LOADING,{loading:e})}}]),a}(d["d"]));Le=Object(u["a"])([d["a"]],Le);var Ee=Le,Te=10,Ve=function(e){Object(l["a"])(a,e);var t=Object(c["a"])(a);function a(){var e;return Object(s["a"])(this,a),e=t.apply(this,arguments),e.pagination={lastPage:1,page:0,prev:0,next:0,perPage:Te,total:0,hasNext:!1,hasPrev:!1,filter:""},e.items=[],e}return Object(o["a"])(a,[{key:"updatePagination",value:function(e){this.pagination.page=e.pagination.page,this.pagination.prev=e.pagination.prev,this.pagination.next=e.pagination.next,this.pagination.perPage=e.pagination.perPage,this.pagination.total=e.pagination.total,this.pagination.hasPrev=e.pagination.hasPrev,this.pagination.hasNext=e.pagination.hasNext,this.pagination.lastPage=Math.floor(e.pagination.total/this.pagination.perPage),this.items=e.data}}]),a}(d["d"]);Ve=Object(u["a"])([d["a"]],Ve);var $e=Ve,Ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",[a("v-col",[a("v-card",[a("v-card-title",[e._t("title",[e._v(" "+e._s(e.title)+" ")]),e._t("button-refresh",[a("v-btn",{attrs:{icon:"",color:"green"},on:{click:e.handleRefresh}},[a("v-icon",[e._v("mdi-cached")])],1)]),e._t("button-add",[e.newItemUrl?a("v-btn",{attrs:{icon:"",color:"info",to:e.newItemUrl}},[a("v-icon",[e._v("mdi-plus")])],1):e._e()]),e._t("toolbar"),a("v-spacer"),e._t("search",[e.disableSearch?e._e():a("v-text-field",{staticClass:"search",attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},on:{keyup:e.searchChanged,"click:append":e.searchChanged},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})])],2),a("v-data-table",{class:e.getClass,attrs:{headers:e.getHeaders,items:e.items,"items-per-page":e.perPage,options:e.options,"server-items-length":e.total},on:{"update:options":function(t){e.options=t},"click:row":e.handleRowClick},scopedSlots:e._u([e._l(Object.keys(e.$scopedSlots),(function(t){return{key:t,fn:function(a){return[e._t(t,null,null,a)]}}}))],null,!0)},[e._l(Object.keys(e.$slots),(function(t){return e._t(t,null,{slot:t,props:e.props})}))],2)],1)],1)],1)},Ie=[],Re=a("b047c"),Ne=a.n(Re),De=function(e){return function(t,a){return{configurable:!0,enumerable:!1,value:Ne()(t[a],e)}}},Ue=function(e){Object(l["a"])(a,e);var t=Object(c["a"])(a);function a(){var e;return Object(s["a"])(this,a),e=t.apply(this,arguments),e.options={page:e.page,itemsPerPage:e.perPage,sortBy:[],sortDesc:[],groupBy:[],groupDesc:[],multiSort:!1,mustSort:!1},e.search="",e}return Object(o["a"])(a,[{key:"handleRowClick",value:function(e){this.onRowClick&&this.onRowClick(e)}},{key:"handleRefresh",value:function(){this.onRefresh&&this.onRefresh()}},{key:"optionsChanged",value:function(){this.onOptionsChange(this.options)}},{key:"searchChanged",value:function(){this.onSearchChange&&this.onSearchChange(this.search)}},{key:"getClass",get:function(){return"elevation-1 ".concat(this.className||"")}},{key:"getHeaders",get:function(){var e={align:"start",sortable:!1,filterable:!1,groupable:!1};return this.headers.map((function(t){return"string"===typeof t?Object(X["a"])(Object(X["a"])({},e),{},{text:t,value:t}):Object(X["a"])(Object(X["a"])({},e),t)}))}}]),a}(d["d"]);Object(u["a"])([Object(d["c"])({default:""})],Ue.prototype,"title",void 0),Object(u["a"])([Object(d["c"])({default:[]})],Ue.prototype,"items",void 0),Object(u["a"])([Object(d["c"])({default:[],required:!0})],Ue.prototype,"headers",void 0),Object(u["a"])([Object(d["c"])({default:""})],Ue.prototype,"className",void 0),Object(u["a"])([Object(d["c"])({default:0})],Ue.prototype,"total",void 0),Object(u["a"])([Object(d["c"])({default:Te})],Ue.prototype,"perPage",void 0),Object(u["a"])([Object(d["c"])({default:1})],Ue.prototype,"page",void 0),Object(u["a"])([Object(d["c"])({default:!1})],Ue.prototype,"loading",void 0),Object(u["a"])([Object(d["c"])({default:"Loading data..."})],Ue.prototype,"loadingText",void 0),Object(u["a"])([Object(d["c"])({default:!1})],Ue.prototype,"disableSearch",void 0),Object(u["a"])([Object(d["c"])({default:""})],Ue.prototype,"newItemUrl",void 0),Object(u["a"])([Object(d["c"])({type:Array,required:!1,default:function(){return[]}})],Ue.prototype,"itemSlots",void 0),Object(u["a"])([Object(d["c"])({type:Function,required:!0})],Ue.prototype,"onOptionsChange",void 0),Object(u["a"])([Object(d["c"])({type:Function,required:!1})],Ue.prototype,"onSearchChange",void 0),Object(u["a"])([Object(d["c"])({type:Function,required:!1})],Ue.prototype,"onRowClick",void 0),Object(u["a"])([Object(d["c"])({type:Function,required:!1})],Ue.prototype,"onRefresh",void 0),Object(u["a"])([Object(d["e"])("options")],Ue.prototype,"optionsChanged",null),Object(u["a"])([Object(d["e"])("search"),De(500)],Ue.prototype,"searchChanged",null),Ue=Object(u["a"])([Object(d["a"])({components:{}})],Ue);var qe=Ue,Fe=qe,He=(a("dcf5"),a("8fea")),Ge=Object(g["a"])(Fe,Ae,Ie,!1,null,"1f2bef11",null),Be=Ge.exports;_()(Ge,{VBtn:K["a"],VCard:he["a"],VCardTitle:me["c"],VCol:be["a"],VDataTable:He["a"],VIcon:Y["a"],VRow:_e["a"],VSpacer:ye["a"],VTextField:ke["a"]});var Me=a("bc3a"),Ke=a.n(Me),Je=function(e){var t=Object({VUE_APP_API_ENDPOINT:"https://binance-tracker-dev.herokuapp.com",NODE_ENV:"production",VUE_APP_WS_ENDPOINT:"wss://binance-tracker-dev.herokuapp.com/ws",BASE_URL:"/"})[e];if(!t)throw new Error('Environment variable "'.concat(e,'" must be defined!'));return console.log('Found mandatory environment variable: "'.concat(e,'"="').concat(t,'"')),t},Ye=Je("VUE_APP_API_ENDPOINT"),We=Je("VUE_APP_WS_ENDPOINT"),ze=Ke.a.create({baseURL:Ye});function Ze(e){ze.defaults.headers.common["Authorization"]=e?"Bearer ".concat(e):""}var Qe=function(){var e=Object(le["a"])(regeneratorRuntime.mark((function e(t,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",ze.post("/api/account/login",{email:t,password:a}).then((function(e){var t=e.data;return{token:t.token,user:t.user}})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Xe=function(){var e=Object(le["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",ze.get("/api/account/me").then((function(e){var t=e.data;return{token:t.token,user:t.user}})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),et=function(){var e=Object(le["a"])(regeneratorRuntime.mark((function e(t){var a,r,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.page,r=t.perPage,n=t.filter,i=t.paid,e.abrupt("return",ze.get("/api/signals",{params:{page:a,perPage:r,filter:n,paid:i}}).then((function(e){var t=e.data;return t})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),tt=function(){var e=Object(le["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",ze.get("/api/signals/".concat(t)).then((function(e){var t=e.data;return t})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),at=function(){var e=Object(le["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",ze.post("/api/signals",t).then((function(e){var t=e.data;return t})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),rt=function(){var e=Object(le["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",ze.put("/api/signals/".concat(t.id),t).then((function(e){var t=e.data;return t})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),nt=function(){var e=Object(le["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",ze.delete("/api/signals/".concat(t)).then((function(e){var t=e.data;return t})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),it=function(){var e=Object(le["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",ze.post("/api/signals/bulk",{signals:t}).then((function(e){var t=e.data;return t})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),st=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("tr",{class:"ListSignalRow "+(e.odd?"odd":""),on:{click:e.handleClick}},[a("td",{staticClass:"id-cell"},[e._v(e._s(e.model.id))]),a("td",{staticClass:"ticker-cell"},[e._v(e._s(e.model.title||e.model.ticker))]),a("td",{staticClass:"ticker-cell"},[e._v(e._s(e.model.type))]),a("td",{staticClass:"channel-cell"},[e._v(e._s(e.channel))]),a("td",[a("div",{staticClass:"d-flex flex-column"},[a("div",{staticClass:"published-at-data"},[e._v(" "+e._s(e._f("dayjs")(e.model.createdAt,"format","HH:mm DD.MM.YY"))+" ")])])]),a("td",{staticClass:"price-cell"},[e._v(e._s(e.formatPrice(e.model.price)||"-"))]),a("td",{staticClass:"exit-price-cell"},[e._v(e._s(e.formatPrice(e.model.exitPrice)||"-"))]),a("td",{staticClass:"current-price-cell"},[a("div",{staticClass:"d-flex flex-column"},[a("div",{staticClass:"current-price"},[e._v(" "+e._s(e.model.lastPrice||"-")+" ")]),a("div",{staticClass:"remainings"},[e._v(e._s(e.$t("remains in position"))+": "+e._s(e.remainings))])])]),a("td",{staticClass:"profitability-cell"},[e._v(e._s(e.profitability))]),a("td",[e._l(e.model.takeProfitOrders,(function(e,t){return[a("list-order-row",{key:t,attrs:{order:e}})]}))],2),a("td",[e._l(e.model.stopLossOrders,(function(e,t){return[a("list-order-row",{key:t,attrs:{order:e}})]}))],2),a("td",[e._v(" "+e._s(e.status)+" "),a("v-btn",{attrs:{icon:"","x-small":""},on:{click:function(t){t.stopPropagation(),e.showSignalStatusHelp=!0}}},[a("v-icon",{attrs:{dark:""}},[e._v("mdi-information-outline")])],1),a("popup",{attrs:{title:e.$t("Signal statuses"),text:e.$t("statusesHelp")},model:{value:e.showSignalStatusHelp,callback:function(t){e.showSignalStatusHelp=t},expression:"showSignalStatusHelp"}})],1)])},ot=[],lt=(a("b680"),a("5319"),function(e){Object(l["a"])(a,e);var t=Object(c["a"])(a);function a(){return Object(s["a"])(this,a),t.apply(this,arguments)}return Object(o["a"])(a,[{key:"model",get:function(){return this.value},set:function(e){var t=this.model;Object.prototype.hasOwnProperty.call(t,"changed")&&(t.changed=!0),this.$emit("input",e)}}]),a}(d["d"]));Object(u["a"])([Object(d["c"])({required:!0})],lt.prototype,"value",void 0),lt=Object(u["a"])([d["a"]],lt);var ct=lt,ut=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{staticClass:"Popup",attrs:{"max-width":"290"},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},[a("v-card",[e.title?a("v-card-title",{staticClass:"headline",domProps:{innerHTML:e._s(e.title)}}):e._e(),a("v-card-text",{domProps:{innerHTML:e._s(e.text)}}),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(t){t.stopPropagation(),e.model=!1}}},[e._v(" Close ")])],1)],1)],1)},dt=[],pt=function(e){Object(l["a"])(a,e);var t=Object(c["a"])(a);function a(){return Object(s["a"])(this,a),t.apply(this,arguments)}return a}(Object(d["b"])(ct));Object(u["a"])([Object(d["c"])({type:String,required:!1})],pt.prototype,"title",void 0),Object(u["a"])([Object(d["c"])({type:String,required:!0})],pt.prototype,"text",void 0),pt=Object(u["a"])([Object(d["a"])({components:{}})],pt);var vt=pt,ft=vt,ht=a("169a"),mt=Object(g["a"])(ft,ut,dt,!1,null,null,null),bt=mt.exports;_()(mt,{VBtn:K["a"],VCard:he["a"],VCardActions:me["a"],VCardText:me["b"],VCardTitle:me["c"],VDialog:ht["a"],VSpacer:ye["a"]});var gt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ListOrderRow"},[a("v-tooltip",{attrs:{left:"",disabled:!e.comment},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,n=t.attrs;return[a("div",e._g(e._b({class:{closed:e.order.closed,"closed-partially":e.closedPartially}},"div",n,!1),r),[e._v(" "+e._s(e.orderType)+" @ "+e._s(e.order.price)+" ("+e._s(e.volume)+") ")])]}}])},[a("span",[e._v(e._s(e.comment))])])],1)},Ot=[],_t=function(e){Object(l["a"])(a,e);var t=Object(c["a"])(a);function a(){return Object(s["a"])(this,a),t.apply(this,arguments)}return Object(o["a"])(a,[{key:"orderType",get:function(){return"take profit"===this.order.type?"TP":"SL"}},{key:"volume",get:function(){return this.order.closedVolume?"".concat((100*this.order.closedVolume).toFixed(2),"%"):"".concat((100*this.order.volume).toFixed(2),"%")}},{key:"closedPartially",get:function(){return!!this.order.closedVolume&&this.order.closedVolume!==this.order.volume}},{key:"comment",get:function(){return this.closedPartially?"Order closed partially at volume ".concat(this.volume):"Order fully closed at volume ".concat(this.volume)}}]),a}(d["d"]);Object(u["a"])([Object(d["c"])({required:!0})],_t.prototype,"order",void 0),_t=Object(u["a"])([Object(d["a"])({components:{}})],_t);var yt=_t,kt=yt,jt=(a("422b"),a("3a2f")),xt=Object(g["a"])(kt,gt,Ot,!1,null,"dc9e70e2",null),wt=xt.exports;_()(xt,{VTooltip:jt["a"]});var St=function(e){Object(l["a"])(a,e);var t=Object(c["a"])(a);function a(){var e;return Object(s["a"])(this,a),e=t.apply(this,arguments),e.showSignalStatusHelp=!1,e}return Object(o["a"])(a,[{key:"handleClick",value:function(){this.$router.push({name:"signal-edit",params:{signalId:"".concat(this.model.id)}})}},{key:"formatPrice",value:function(e){return e&&e.toFixed?e.toFixed(10).replace(/0+$/,""):"-"}},{key:"status",get:function(){var e={delayed:this.$t("Delayed"),active:this.$t("Active"),finished:this.$t("Finished"),cancelled:this.$t("Cancelled")};return e[this.model.status]}},{key:"profitability",get:function(){return this.model.profitability?"".concat(this.model.profitability.toFixed(3),"%"):"-"}},{key:"remainings",get:function(){return!this.model.remaining||isNaN(this.model.remaining)?"0":"".concat((100*this.model.remaining).toFixed(2),"%")}},{key:"channel",get:function(){return this.model&&this.model.channel?this.model.channel.name:"-"}}]),a}(Object(d["b"])(ct));Object(u["a"])([Object(d["c"])({default:!1})],St.prototype,"odd",void 0),St=Object(u["a"])([Object(d["a"])({components:{Popup:bt,ListOrderRow:wt},mixins:[ct]})],St);var Ct=St,Pt=Ct,Lt=(a("76fe"),Object(g["a"])(Pt,st,ot,!1,null,"2a82f6be",null)),Et=Lt.exports;_()(Lt,{VBtn:K["a"],VIcon:Y["a"]});var Tt=function(e){Object(l["a"])(a,e);var t=Object(c["a"])(a);function a(){var e;return Object(s["a"])(this,a),e=t.apply(this,arguments),e.search="",e.debounceSearch=null,e.headers=[{text:e.$t("Id"),value:"id"},{text:e.$t("Currency"),value:"title"},{text:e.$t("Type"),value:"type"},{text:e.$t("Channel"),value:"channel"},{text:e.$t("Published"),value:"createdAt"},{text:e.$t("Entry price"),value:"price"},{text:e.$t("Current exit price"),value:"price"},{text:e.$t("Triggered price"),value:"price"},{text:e.$t("Profitability"),value:"profitability"},{text:e.$t("Take profit"),value:""},{text:e.$t("Stop loss"),value:""},{text:e.$t("Status"),value:"status"}],e}return Object(o["a"])(a,[{key:"fetch",value:function(){var e=Object(le["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.setLoading(!0),e.next=4,et({page:this.pagination.page,perPage:this.pagination.perPage,filter:this.pagination.filter});case 4:t=e.sent,this.updatePagination(t),e.next=11;break;case 8:return e.prev=8,e.t0=e["catch"](0),e.abrupt("return");case 11:return e.prev=11,this.setLoading(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,this,[[0,8,11,14]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"handleTableChange",value:function(e){var t=e.page,a=e.itemsPerPage;this.pagination=Object(X["a"])(Object(X["a"])({},this.pagination),{},{page:t,perPage:a}),this.fetch()}},{key:"handleTableSearch",value:function(e){this.pagination=Object(X["a"])(Object(X["a"])({},this.pagination),{},{filter:e}),this.fetch()}},{key:"handleRowClick",value:function(e){var t=e.id;t&&this.$router.push({name:"signal-edit",params:{signalId:"".concat(t)}})}}]),a}(Object(d["b"])(Ee,$e));Object(u["a"])([Object(p["c"])("loading")],Tt.prototype,"loading",void 0),Object(u["a"])([De(500)],Tt.prototype,"handleTableSearch",null),Tt=Object(u["a"])([Object(d["a"])({components:{VCustomTable:Be,ListSignalRow:Et},mixins:[Ee,$e]})],Tt);var Vt=Tt,$t=Vt,At=(a("907f"),Object(g["a"])($t,Ce,Pe,!1,null,"54cf3e3c",null)),It=At.exports;_()(At,{VContainer:ge["a"]});var Rt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.signal?a("v-container",{staticClass:"SignalEdit"},[a("div",{staticClass:"text-center text-h5"},[e._v(e._s(e.$t("Signal information")))]),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"4"}},[a("signal-data",{ref:"signalData",attrs:{disabled:e.locked},model:{value:e.signal,callback:function(t){e.signal=t},expression:"signal"}})],1),a("v-col",{attrs:{cols:"12",sm:"8"}},[a("signal-edit-panel",{staticClass:"mb-4 pb-4",attrs:{title:e.$t("Entry points"),onAdd:e.handleEntryPointAdd,error:e.entryPointError}},[a("v-form",{ref:"entryPointsRef",model:{value:e.entryPointsValid,callback:function(t){e.entryPointsValid=t},expression:"entryPointsValid"}},[e._l(e.signal.entryPoints,(function(t,r){return[a("signal-entry-point",{key:r,attrs:{order:r+1,value:t,disabled:e.locked,onDelete:function(){return e.handleEntryPointDelete(r)}}})]}))],2)],1),a("signal-edit-panel",{staticClass:"mb-4 pb-4",attrs:{title:e.$t("Take profits"),onAdd:e.handleTakeProfitAdd,error:e.takeProfitError}},[a("v-form",{ref:"takeProfitOrdersRef",model:{value:e.takeProfitOrdersValid,callback:function(t){e.takeProfitOrdersValid=t},expression:"takeProfitOrdersValid"}},[e._l(e.signal.takeProfitOrders,(function(t,r){return[a("signal-order",{key:r,attrs:{order:r+1,value:t,disabled:e.locked,onDelete:function(){return e.handleTakeProfitDelete(r)}}})]}))],2)],1),a("signal-edit-panel",{staticClass:"mb-4 pb-4",attrs:{title:e.$t("Stop losses"),onAdd:e.handleStopLossAdd,error:e.stopLossError}},[a("v-form",{ref:"stopLossOrdersRef",model:{value:e.stopLossOrdersValid,callback:function(t){e.stopLossOrdersValid=t},expression:"stopLossOrdersValid"}},[e._l(e.signal.stopLossOrders,(function(t,r){return[a("signal-order",{key:r,attrs:{order:r+1,value:t,disabled:e.locked,onDelete:function(){return e.handleStopLossDelete(r)}}})]}))],2)],1)],1)],1),a("v-row",{staticClass:"button-box"},[a("v-col",{staticClass:"text-right",attrs:{xs:"12"}},[a("v-btn",{attrs:{color:"default"},on:{click:e.handleClose}},[e._v("Close")]),a("v-btn",{staticClass:"ml-4",attrs:{color:"success",disabled:e.locked},on:{click:e.handleSave}},[e._v("Save")])],1)],1),e.signal.id?a("v-card",{staticClass:"danger-section"},[a("v-card-title",{staticClass:"danger-section-title"},[e._v(" Danger section ")]),a("v-card-text",{staticClass:"d-flex justify-space-between align-center"},[a("div",[e._v(" This action irreversibly delete signal from database. All correspondig data (history, comments, posts) would be removed too. ")]),a("v-btn",{staticClass:"button",attrs:{color:"error",disabled:e.locked},on:{click:e.handleDelete}},[e._v("Delete signal")])],1)],1):e._e()],1):e._e()},Nt=[],Dt=(a("7db0"),a("13d5"),a("d3b7"),a("25f0"),a("2909")),Ut=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(X["a"])({id:0,price:0,comment:"",signalId:0},e)},qt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(X["a"])({id:0,price:0,volume:0,comment:"",signalId:0,type:"take profit"},e)},Ft=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(X["a"])({id:0,price:0,volume:0,comment:"",signalId:0,type:"stop loss"},e)},Ht=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(X["a"])({id:0,status:"delayed",profitability:0,ticker:"",title:"",channel:{name:""},price:0,type:"long",risk:"low",term:"long",volume:0,paid:!1,commentable:!0,remaining:1,userId:0,comments:[],entryPoints:[],takeProfitOrders:[],stopLossOrders:[]},e);return t.channel||(t.channel={name:""}),t},Gt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-form",{ref:"form",model:{value:e.formValid,callback:function(t){e.formValid=t},expression:"formValid"}},[a("v-row",{staticClass:"SignalData"},[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{rules:e.requiredRules,label:e.$t("Ticker"),required:"","hide-details":"auto",disabled:e.disabled},model:{value:e.model.ticker,callback:function(t){e.$set(e.model,"ticker",t)},expression:"model.ticker"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:e.$t("Title"),hint:e.$t("edit.title_hint"),"persistent-hint":"",disabled:e.disabled},model:{value:e.model.title,callback:function(t){e.$set(e.model,"title",t)},expression:"model.title"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:e.$t("Channel"),hint:e.$t("edit.channel_hint"),"persistent-hint":"",disabled:e.disabled},model:{value:e.model.channel.name,callback:function(t){e.$set(e.model.channel,"name",t)},expression:"model.channel.name"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-select",{attrs:{label:e.$t("Type"),items:e.typesOptions,"hide-details":"auto",required:"",disabled:e.disabled},model:{value:e.model.type,callback:function(t){e.$set(e.model,"type",t)},expression:"model.type"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-select",{attrs:{label:e.$t("Risk"),items:e.riskOptions,"hide-details":"auto",required:"",disabled:e.disabled},model:{value:e.model.risk,callback:function(t){e.$set(e.model,"risk",t)},expression:"model.risk"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-select",{attrs:{label:e.$t("Terms"),items:e.termsOptions,"hide-details":"auto",required:"",disabled:e.disabled},model:{value:e.model.term,callback:function(t){e.$set(e.model,"term",t)},expression:"model.term"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:e.$t("Volume"),required:"","hide-details":"auto","append-icon":"mdi-information-outline",disabled:e.disabled},on:{"click:append":function(t){t.stopPropagation(),e.showVolumeInfo=!0}},model:{value:e.model.volume,callback:function(t){e.$set(e.model,"volume",e._n(t))},expression:"model.volume"}}),a("popup",{attrs:{title:e.$t("Recommended volume"),text:"Blah-blah-blah"},model:{value:e.showVolumeInfo,callback:function(t){e.showVolumeInfo=t},expression:"showVolumeInfo"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-checkbox",{attrs:{label:e.$t("Paid signal"),hint:e.$t("edit.paid_signal_hint"),"persistent-hint":"",required:"",disabled:e.disabled},model:{value:e.model.paid,callback:function(t){e.$set(e.model,"paid",t)},expression:"model.paid"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-checkbox",{attrs:{label:e.$t("Comments"),hint:e.$t("edit.comments_hint"),"persistent-hint":"",required:"",disabled:e.disabled},model:{value:e.model.commentable,callback:function(t){e.$set(e.model,"commentable",t)},expression:"model.commentable"}})],1)],1)],1)},Bt=[],Mt=function(e){Object(l["a"])(a,e);var t=Object(c["a"])(a);function a(){var e;return Object(s["a"])(this,a),e=t.apply(this,arguments),e.formValid=!0,e}return Object(o["a"])(a,[{key:"validate",value:function(){this.$refs.form.validate()}},{key:"resetValidation",value:function(){this.$refs.form.clear()}}]),a}(d["d"]);Mt=Object(u["a"])([d["a"]],Mt);var Kt=Mt,Jt=function(e){Object(l["a"])(a,e);var t=Object(c["a"])(a);function a(){var e;return Object(s["a"])(this,a),e=t.apply(this,arguments),e.showVolumeInfo=!1,e.requiredRules=[function(e){return!!e||"Field is required"}],e.typesOptions=[{value:"long",text:e.$t("Long")},{value:"short",text:e.$t("Short")}],e.riskOptions=[{value:"high",text:e.$t("High")},{value:"medium",text:e.$t("Medium")},{value:"low",text:e.$t("Low")}],e.termsOptions=[{value:"short",text:e.$t("Short")},{value:"medium",text:e.$t("Medium")},{value:"long",text:e.$t("Long")}],e}return a}(Object(d["b"])(ct,Kt));Object(u["a"])([Object(d["c"])({type:Boolean,required:!1})],Jt.prototype,"disabled",void 0),Jt=Object(u["a"])([Object(d["a"])({components:{Popup:bt},mixins:[ct,Kt]})],Jt);var Yt=Jt,Wt=Yt,zt=a("ac7c"),Zt=a("b974"),Qt=Object(g["a"])(Wt,Gt,Bt,!1,null,null,null),Xt=Qt.exports;_()(Qt,{VCheckbox:zt["a"],VCol:be["a"],VForm:Oe["a"],VRow:_e["a"],VSelect:Zt["a"],VTextField:ke["a"]});var ea=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:"SignalEditPanel"},[a("v-card-title",[a("span",{staticClass:"SignalEditPanel--title"},[e._v(e._s(e.title))]),a("v-spacer"),e.onAdd?a("span",{staticClass:"SignalEditPanel--add-button"},[a("v-btn",{attrs:{text:"",color:"blue lighten-3"},on:{click:e.onAdd}},[e._v(e._s(e.$t("+ Add more")))])],1):e._e()],1),a("v-card-text",[e._t("default"),e.error?a("div",{staticClass:"text-caption red--text lighten-2",attrs:{color:"error"},domProps:{innerHTML:e._s(e.error)}}):e._e()],2)],1)},ta=[],aa=function(e){Object(l["a"])(a,e);var t=Object(c["a"])(a);function a(){return Object(s["a"])(this,a),t.apply(this,arguments)}return a}(d["d"]);Object(u["a"])([Object(d["c"])({type:String,required:!1})],aa.prototype,"title",void 0),Object(u["a"])([Object(d["c"])({type:String,required:!1})],aa.prototype,"error",void 0),Object(u["a"])([Object(d["c"])({type:Function,required:!1})],aa.prototype,"onAdd",void 0),aa=Object(u["a"])([Object(d["a"])({components:{}})],aa);var ra=aa,na=ra,ia=Object(g["a"])(na,ea,ta,!1,null,null,null),sa=ia.exports;_()(ia,{VBtn:K["a"],VCard:he["a"],VCardText:me["b"],VCardTitle:me["c"],VSpacer:ye["a"]});var oa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",{staticClass:"SignalEntryPoint"},[a("v-col",{staticClass:"d-flex justify-center align-center order",attrs:{cols:"12",sm:"1"}},[e._v(" "+e._s(e.order)+" ")]),a("v-col",{attrs:{cols:"12",sm:"4"}},[a("v-text-field",{attrs:{type:"number",rules:e.requiredRules,label:e.$t("Price"),required:"",dense:"","hide-details":"",disabled:e.disabled},model:{value:e.model.price,callback:function(t){e.$set(e.model,"price",e._n(t))},expression:"model.price"}})],1),a("v-col",{staticClass:"pr-0",attrs:{cols:"12",sm:"6"}},[a("v-text-field",{attrs:{dense:"",label:e.$t("Comment"),"hide-details":"",disabled:e.disabled},model:{value:e.model.comment,callback:function(t){e.$set(e.model,"comment",t)},expression:"model.comment"}})],1),a("v-col",{staticClass:"pl-0 d-flex justify-center align-center",attrs:{cols:"12",sm:"1"}},[a("v-btn",{attrs:{icon:"",small:"",disabled:e.disabled},on:{click:e.onDelete}},[a("v-icon",{attrs:{dark:""}},[e._v(" mdi-trash-can-outline ")])],1)],1)],1)},la=[],ca=(a("a9e3"),function(e){Object(l["a"])(a,e);var t=Object(c["a"])(a);function a(){var e;return Object(s["a"])(this,a),e=t.apply(this,arguments),e.requiredRules=[function(e){return!!e||"Field is required"}],e}return a}(Object(d["b"])(ct)));Object(u["a"])([Object(d["c"])({type:Number,required:!0})],ca.prototype,"order",void 0),Object(u["a"])([Object(d["c"])({type:Boolean,required:!1})],ca.prototype,"disabled",void 0),Object(u["a"])([Object(d["c"])({type:Function,required:!0})],ca.prototype,"onDelete",void 0),ca=Object(u["a"])([Object(d["a"])({components:{},mixins:[ct]})],ca);var ua=ca,da=ua,pa=(a("542e"),Object(g["a"])(da,oa,la,!1,null,"cd804ebe",null)),va=pa.exports;_()(pa,{VBtn:K["a"],VCol:be["a"],VIcon:Y["a"],VRow:_e["a"],VTextField:ke["a"]});var fa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",{staticClass:"SignalOrder"},[a("v-col",{staticClass:"d-flex justify-center align-center order",attrs:{cols:"12",sm:"1"}},[e._v(" "+e._s(e.order)+" ")]),a("v-col",{attrs:{cols:"12",sm:"4"}},[a("v-text-field",{attrs:{type:"number",rules:e.requiredRules,label:e.$t("Price"),required:"","hide-details":"",disabled:e.disabled},model:{value:e.model.price,callback:function(t){e.$set(e.model,"price",e._n(t))},expression:"model.price"}})],1),a("v-col",{attrs:{cols:"12",sm:"2"}},[a("v-text-field",{attrs:{type:"number",rules:e.requiredRules,label:e.$t("Volume"),suffix:"%",required:"","hide-details":"",disabled:e.disabled},model:{value:e.volume,callback:function(t){e.volume=e._n(t)},expression:"volume"}})],1),a("v-col",{attrs:{cols:"12",sm:"4"}},[a("v-text-field",{attrs:{label:e.$t("Comment"),"hide-details":"",disabled:e.disabled},model:{value:e.model.comment,callback:function(t){e.$set(e.model,"comment",t)},expression:"model.comment"}})],1),a("v-col",{staticClass:"pb-0 d-flex justify-center align-center",attrs:{cols:"12",sm:"1"}},[a("v-btn",{attrs:{icon:"",small:"",disabled:e.disabled},on:{click:e.onDelete}},[a("v-icon",{attrs:{dark:""}},[e._v(" mdi-trash-can-outline ")])],1)],1)],1)},ha=[],ma=function(e){Object(l["a"])(a,e);var t=Object(c["a"])(a);function a(){var e;return Object(s["a"])(this,a),e=t.apply(this,arguments),e.requiredRules=[function(e){return!!e||"Field is required"}],e}return Object(o["a"])(a,[{key:"volume",get:function(){return 100*this.model.volume},set:function(e){this.model.volume=e/100}}]),a}(Object(d["b"])(ct));Object(u["a"])([Object(d["c"])({type:Number,required:!0})],ma.prototype,"order",void 0),Object(u["a"])([Object(d["c"])({type:Boolean,required:!1})],ma.prototype,"disabled",void 0),Object(u["a"])([Object(d["c"])({type:Function,required:!0})],ma.prototype,"onDelete",void 0),ma=Object(u["a"])([Object(d["a"])({components:{},mixins:[ct]})],ma);var ba=ma,ga=ba,Oa=(a("0ebf"),Object(g["a"])(ga,fa,ha,!1,null,"001aaae5",null)),_a=Oa.exports;_()(Oa,{VBtn:K["a"],VCol:be["a"],VIcon:Y["a"],VRow:_e["a"],VTextField:ke["a"]});var ya=function(e){Object(l["a"])(a,e);var t=Object(c["a"])(a);function a(){var e;return Object(s["a"])(this,a),e=t.apply(this,arguments),e.takeProfitError="",e.stopLossError="",e.entryPointError="",e.takeProfitOrdersValid=!0,e.stopLossOrdersValid=!0,e.entryPointsValid=!0,e.signal=Object(X["a"])({},Ht()),e}return Object(o["a"])(a,[{key:"handleEntryPointAdd",value:function(){this.signal.entryPoints=[].concat(Object(Dt["a"])(this.signal.entryPoints),[Ut({signalId:this.signal.id})])}},{key:"handleEntryPointDelete",value:function(e){this.signal.entryPoints=this.signal.entryPoints.filter((function(t,a){return a!==e}))}},{key:"handleTakeProfitAdd",value:function(){this.signal.takeProfitOrders=[].concat(Object(Dt["a"])(this.signal.takeProfitOrders),[qt({signalId:this.signal.id})])}},{key:"handleTakeProfitDelete",value:function(e){this.signal.takeProfitOrders=this.signal.takeProfitOrders.filter((function(t,a){return a!==e}))}},{key:"handleStopLossAdd",value:function(){this.signal.stopLossOrders=[].concat(Object(Dt["a"])(this.signal.stopLossOrders),[Ft({signalId:this.signal.id})])}},{key:"handleStopLossDelete",value:function(e){this.signal.stopLossOrders=this.signal.stopLossOrders.filter((function(t,a){return a!==e}))}},{key:"fetch",value:function(){var e=Object(le["a"])(regeneratorRuntime.mark((function e(){var t,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.$route.params.signalId,"new"!==t){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,this.setLoading(!0),e.next=7,tt(t);case 7:a=e.sent,r=a.signal,this.signal=Ht(r),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](3),this.$toasted.error("Unable to load signal");case 15:return e.prev=15,this.setLoading(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[3,12,15,18]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"mounted",value:function(){this.fetch()}},{key:"validate",value:function(){this.takeProfitError="",this.stopLossError="",this.entryPointError="",this.takeProfitOrdersValid=!0,this.stopLossOrdersValid=!0,this.entryPointsValid=!0,this.$refs.signalData.validate(),this.$refs.entryPointsRef.validate(),this.$refs.takeProfitOrdersRef.validate(),this.$refs.stopLossOrdersRef.validate();var e=this.signal.entryPoints.length>0;e||(this.entryPointError=this.$t("edit.entry_point_must_exists"));var t=this.signal.takeProfitOrders.length>0;t||(this.takeProfitError=this.$t("edit.take_profit_must_exists"));var a=this.signal.stopLossOrders.length>0;if(a||(this.stopLossError=this.$t("edit.stop_loss_must_exists")),this.entryPointError||this.takeProfitError||this.stopLossError)return!1;var r=this.signal.takeProfitOrders.reduce((function(e,t){return e+t.volume}),0);1!==r&&(this.takeProfitError=this.$t("edit.take_profit_must_be_1"));var n=this.signal.stopLossOrders.reduce((function(e,t){return e+t.volume}),0);if(1!==n&&(this.stopLossError=this.$t("edit.stop_loss_must_be_1")),this.takeProfitError||this.stopLossError)return!1;var i=Math.max.apply(Math,Object(Dt["a"])(this.signal.entryPoints.map((function(e){return e.price})))),s=Math.min.apply(Math,Object(Dt["a"])(this.signal.entryPoints.map((function(e){return e.price}))));if("long"===this.signal.type){var o=this.signal.takeProfitOrders.find((function(e){return e.price<=i}));if(o)return this.takeProfitError=this.$t("edit.long_take_profit_must_be_greater_then_entry_points"),!1;var l=this.signal.stopLossOrders.find((function(e){return e.price>=s}));if(l)return this.stopLossError=this.$t("edit.long_stop_loss_must_be_less_then_entry_points"),!1}else if("short"===this.signal.type){var c=this.signal.takeProfitOrders.find((function(e){return e.price>=s}));if(c)return this.takeProfitError=this.$t("edit.short_take_profit_must_be_less_then_entry_points"),!1;var u=this.signal.stopLossOrders.find((function(e){return e.price<=i}));if(u)return this.stopLossError=this.$t("edit.short_stop_loss_must_be_greater_then_entry_points"),!1}return!0}},{key:"handleSave",value:function(){var e=Object(le["a"])(regeneratorRuntime.mark((function e(){var t,a,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.validate()){e.next=2;break}return e.abrupt("return");case 2:if(t={id:this.signal.id,status:this.signal.status||"active",profitability:parseFloat(this.signal.profitability.toString())||0,ticker:this.signal.ticker,title:this.signal.title||this.signal.ticker,price:parseFloat(this.signal.price.toString())||0,type:this.signal.type,risk:this.signal.risk,term:this.signal.term,volume:parseFloat(this.signal.volume.toString()),paid:!!this.signal.paid,commentable:!!this.signal.commentable,date:this.signal.date||new Date,post:this.signal.post||"",comments:[]},this.signal.channel&&this.signal.channel.name?t.channel={name:this.signal.channel.name}:delete t.channel,t.entryPoints=(this.signal.entryPoints||[]).map((function(e){return{signalId:e.signalId,price:e.price,comment:e.comment||""}})),t.takeProfitOrders=(this.signal.takeProfitOrders||[]).map((function(e){return{signalId:e.signalId,price:e.price,volume:e.volume,type:e.type,comment:e.comment||""}})),t.stopLossOrders=(this.signal.stopLossOrders||[]).map((function(e){return{signalId:e.signalId,price:e.price,volume:e.volume,type:e.type,comment:e.comment||""}})),this.setLoading(!0),a=null,e.prev=9,!t.id){e.next=17;break}return e.next=13,rt(t);case 13:r=e.sent,a=r.signal,e.next=21;break;case 17:return e.next=19,at(t);case 19:n=e.sent,a=n.signal;case 21:console.log(">>>> 0",a),console.log(">>>> 1",Ht(a)),this.signal=Ht(a),this.$toasted.success("Signal saved"),e.next=31;break;case 27:return e.prev=27,e.t0=e["catch"](9),this.$toasted.error("Unable to save signal!"),e.abrupt("return");case 31:return e.prev=31,this.setLoading(!1),e.finish(31);case 34:this.handleClose();case 35:case"end":return e.stop()}}),e,this,[[9,27,31,34]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"handleClose",value:function(){this.$router.back()}},{key:"handleDelete",value:function(){var e=Object(le["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.$t("edit.delete_signal_confirm"),!this.signal.id||!confirm(t)){e.next=10;break}return this.setLoading(!0),e.prev=3,e.next=6,nt(this.signal.id);case 6:return e.prev=6,this.setLoading(!1),e.finish(6);case 9:this.handleClose();case 10:case"end":return e.stop()}}),e,this,[[3,,6,9]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"locked",get:function(){return 1!==this.signal.remaining}}]),a}(Object(d["b"])(Ee));ya=Object(u["a"])([Object(d["a"])({components:{SignalData:Xt,SignalEditPanel:sa,SignalEntryPoint:va,SignalOrder:_a},mixins:[Ee]})],ya);var ka=ya,ja=ka,xa=(a("c18d"),Object(g["a"])(ja,Rt,Nt,!1,null,"b6aa6824",null)),wa=xa.exports;_()(xa,{VBtn:K["a"],VCard:he["a"],VCardText:me["b"],VCardTitle:me["c"],VCol:be["a"],VContainer:ge["a"],VForm:Oe["a"],VRow:_e["a"]});var Sa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"SignalsUpload"},[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"4"}},[a("div",{staticClass:"text-h2"},[e._v("CSV upload")])]),a("v-col",{attrs:{cols:"12",sm:"4"}}),a("v-col",{staticClass:"text-right",attrs:{cols:"12",sm:"4"}},[a("v-file-input",{attrs:{accept:".csv",label:"CSV file with signals",multiple:!1,"show-size":""},on:{change:e.handleUpload}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-simple-table",{scopedSlots:e._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",{staticClass:"border-c checkboxes",attrs:{rowspan:"2"}}),a("th",{staticClass:"border-c date-head",attrs:{rowspan:"2"}},[e._v(" "+e._s(e.$t("Date"))+" ")]),a("th",{staticClass:"border-c currency",attrs:{rowspan:"2"}},[e._v(" "+e._s(e.$t("Currency"))+" ")]),a("th",{staticClass:"border-c type-head",attrs:{rowspan:"2"}},[e._v(" "+e._s(e.$t("Type"))+" ")]),a("th",{staticClass:"border-c risk-head",attrs:{rowspan:"2"}},[e._v(" "+e._s(e.$t("Risk"))+" ")]),a("th",{staticClass:"border-c term-head",attrs:{rowspan:"2"}},[e._v(" "+e._s(e.$t("Term"))+" ")]),a("th",{staticClass:"border-c Volume",attrs:{rowspan:"2"}},[e._v(" "+e._s(e.$t("Volume"))+" ")]),a("th",{staticClass:"border-c entry-points-head",attrs:{colspan:"2"}},[e._v(" "+e._s(e.$t("Entry points"))+" ")]),a("th",{staticClass:"border-c take-profit-head",attrs:{colspan:"3"}},[e._v(" "+e._s(e.$t("Take profit"))+" ")]),a("th",{staticClass:"border-c stop-loss-head",attrs:{colspan:"3"}},[e._v(" "+e._s(e.$t("Stop loss"))+" ")]),a("th",{staticClass:"border-o post-head",attrs:{rowspan:"2"}},[e._v(" "+e._s(e.$t("Post"))+" ")])]),a("tr",[a("th",{staticClass:"border-l entrry-point-price-head"},[e._v(" "+e._s(e.$t("Price"))+" ")]),a("th",{staticClass:"border-l entrry-point-comment-head"},[e._v(" "+e._s(e.$t("Comment"))+" ")]),a("th",{staticClass:"border-l take-profit-price-head"},[e._v(" "+e._s(e.$t("Price"))+" ")]),a("th",{staticClass:"border-l take-profit-volume-head"},[e._v(" "+e._s(e.$t("Volume"))+" ")]),a("th",{staticClass:"border-l take-profit-comment-head"},[e._v(" "+e._s(e.$t("Comment"))+" ")]),a("th",{staticClass:"border-l stop-loss-price-head"},[e._v(" "+e._s(e.$t("Price"))+" ")]),a("th",{staticClass:"border-l stop-loss-volume-head"},[e._v(" "+e._s(e.$t("Volume"))+" ")]),a("th",{staticClass:"border-l stop-loss-comment-head"},[e._v(" "+e._s(e.$t("Comment"))+" ")])])]),a("tbody",[e._l(e.rows,(function(t,r){return[a("tr",{key:r,class:"table-row "+(t.ok?"":"error")},[a("td",{staticClass:"text-center"},[a("v-checkbox",{attrs:{dense:"","hide-details":"",disabled:!t.ok||e.rows.saved,value:r},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1),a("td",{staticClass:"text-center"},[e._v(e._s(e._f("dayjs")(t.date,"format","HH:mm DD.MM.YYYY")))]),a("td",{staticClass:"text-center"},[e._v(" "+e._s(t.title)+" "),a("br"),e._v(" ("+e._s(t.ticker)+") ")]),a("td",[e._v(e._s(t.type))]),a("td",[e._v(e._s(t.risk))]),a("td",[e._v(e._s(t.term))]),a("td",[e._v(e._s(t.volume))]),a("td",[e._l(t.entryPoints,(function(t,r){return[a("div",{key:r},[e._v(e._s(t.price))])]}))],2),a("td",[e._l(t.entryPoints,(function(t,r){return[a("div",{key:r},[e._v(e._s(t.comment))])]}))],2),a("td",[e._l(t.takeProfitOrders,(function(t,r){return[a("div",{key:r},[e._v(e._s(t.price))])]}))],2),a("td",[e._l(t.takeProfitOrders,(function(t,r){return[a("div",{key:r},[e._v(e._s(100*t.volume)+"%")])]}))],2),a("td",[e._l(t.takeProfitOrders,(function(t,r){return[a("div",{key:r},[e._v(e._s(t.comment))])]}))],2),a("td",[e._l(t.stopLossOrders,(function(t,r){return[a("div",{key:r},[e._v(e._s(t.price))])]}))],2),a("td",[e._l(t.stopLossOrders,(function(t,r){return[a("div",{key:r},[e._v(e._s(100*t.volume)+"%")])]}))],2),a("td",[e._l(t.stopLossOrders,(function(t,r){return[a("div",{key:r},[e._v(e._s(t.comment))])]}))],2),a("td",{staticClass:"post-cell"},[e._v(e._s(t.post))])])]}))],2)]},proxy:!0}])})],1)],1),a("v-row",[a("v-col",{staticClass:"button-box text-right",attrs:{cols:"12"}},[a("v-btn",{staticClass:"ml-4",attrs:{color:"success",disabled:!e.selected.length},on:{click:e.handleSave}},[e._v("Save")])],1)],1)],1)},Ca=[],Pa=(a("c975"),a("fb6a"),a("1276"),a("4f96")),La=a("3835"),Ea=a("369b"),Ta=a.n(Ea),Va=function(e){Object(l["a"])(a,e);var t=Object(c["a"])(a);function a(){var e;return Object(s["a"])(this,a),e=t.apply(this,arguments),e.selected=[],e.rows={},e}return Object(o["a"])(a,[{key:"parseEntryPoints",value:function(e){var t=e.split(/\|/);return t.map((function(e){var t=e.split(/\//),a=Object(La["a"])(t,2),r=a[0],n=a[1],i={price:parseFloat(r),comment:n,signalId:0,ok:!0};return i.ok=!isNaN(i.price),i}))}},{key:"parseOrders",value:function(e){var t=e.split(/\|/),a=function(e){return-1===e.indexOf("%")?null:parseFloat(e.replace(/[^0-9]/g,""))/100};return t.map((function(e){var t=e.split(/\//),r=Object(La["a"])(t,3),n=r[0],i=r[1],s=r[2],o={price:parseFloat(n),volume:a(i),comment:s,signalId:0,ok:!0};return o.ok=!isNaN(o.price)&&!isNaN(o.price),o}))}},{key:"parseCsv",value:function(){var e=Object(le["a"])(regeneratorRuntime.mark((function e(t){var a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.rows=t.map((function(e,t){var r=Object(La["a"])(e,10),n=r[0],i=r[1],s=r[2],o=r[3],l=r[4],c=r[5],u=r[6],d=r[7],p=r[8],v=r[9],f={order:t,date:new Date(n),title:i,ticker:i.toUpperCase().replace(/[^A-Z]/g,""),type:s.toLowerCase(),risk:o.toLowerCase(),term:l.toLowerCase(),volume:parseFloat(c.replace(/[^0-9]/g,""))/100,entryPoints:a.parseEntryPoints(u),takeProfitOrders:a.parseOrders(d),stopLossOrders:a.parseOrders(p),post:v,ok:!0,status:"delayed",commentable:!0,paid:!0};return f.ok=!isNaN(f.date.getTime())&&!!f.ticker&&!isNaN(f.volume)&&!f.entryPoints.find((function(e){return!e.ok}))&&!f.takeProfitOrders.find((function(e){return!e.ok}))&&!f.stopLossOrders.find((function(e){return!e.ok})),f})),console.log(JSON.stringify(this.rows));case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"handleUpload",value:function(e){var t=this;this.rows=[];var a=Object(La["a"])(e,1),r=a[0],n=new FileReader;n.onload=function(e){if(e.target&&e.target.result){var a=Ta.a.parse(e.target.result,{skipEmptyLines:!0}),r=a.data;if(r){var n=Object(Pa["a"])(r),i=n.slice(1);i&&i.length&&t.parseCsv(i)}}},n.readAsText(r||"")}},{key:"handleSave",value:function(){var e=Object(le["a"])(regeneratorRuntime.mark((function e(){var t,a,r,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.selected.map((function(e){var t=n.rows[e];return delete t.order,delete t.ok,t.entryPoints.forEach((function(e){delete e.order,delete e.ok})),t.takeProfitOrders.forEach((function(e){delete e.order,delete e.ok})),t.stopLossOrders.forEach((function(e){delete e.order,delete e.ok})),t})),e.next=3,it(t);case 3:if(a=e.sent,r=a.signalsIds,Array.isArray(r)){e.next=8;break}return this.$toasted.error(this.$t("Unable to uploade some signals")),e.abrupt("return");case 8:this.$toasted.success(this.$t("Signals successfully uploaded")),this.selected.forEach((function(e){n.rows[e].saved=!0}));case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),a}(d["d"]);Va=Object(u["a"])([Object(d["a"])({components:{Popup:bt}})],Va);var $a=Va,Aa=$a,Ia=(a("c999"),a("23a7")),Ra=a("1f4f"),Na=Object(g["a"])(Aa,Sa,Ca,!1,null,null,null),Da=Na.exports;_()(Na,{VBtn:K["a"],VCheckbox:zt["a"],VCol:be["a"],VContainer:ge["a"],VFileInput:Ia["a"],VRow:_e["a"],VSimpleTable:Ra["a"]}),r["a"].use(ce["a"]);var Ua=[{path:"/login",name:"login",component:Se,meta:{title:"Login"}},{path:"/",name:"dashboard",component:It,meta:{auth:!0,title:"Dashboard",showInMenu:!0,icon:"mdi-view-dashboard"}},{path:"/signals/upload",name:"signals-upload",component:Da,meta:{auth:!0,showInMenu:!0,icon:"mdi-table-arrow-up",title:"Signals CSV upload"}},{path:"/signals/:signalId",name:"signal-edit",component:wa,meta:{auth:!0,title:"Signal edit"}}],qa=new ce["a"]({mode:"history",base:"/",routes:Ua});qa.beforeEach(function(){var e=Object(le["a"])(regeneratorRuntime.mark((function e(t,a,r){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log("Router: to ".concat(t.name,", params: ").concat(JSON.stringify(t.params))),n=t.meta&&t.meta.title,document.title=n?"Binance tracker :: ".concat(n):"Binance tracker",i=t.meta&&t.meta.auth,i){e.next=6;break}return e.abrupt("return",r());case 6:if(Qa.getters.isLoggedOn){e.next=9;break}return e.next=9,Qa.dispatch(F.CHECK_AUTH_TOKEN,{next:t.name,params:t.params});case 9:if(Qa.getters.isLoggedOn){e.next=11;break}return e.abrupt("return",r({name:"login"}));case 11:return e.abrupt("return",r());case 12:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}());var Fa,Ha,Ga=qa,Ba=function(){var e=Object(le["a"])(regeneratorRuntime.mark((function e(t,a){var r,n,i,s,o,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,n=a.username,i=a.password,console.log("ACTION login",n,i),r(q.LOADING,{loading:!0}),r(q.SET_AUTH_TOKEN,{token:null}),e.prev=5,e.next=8,Qe(n,i);case 8:return s=e.sent,o=s.token,l=s.user,r(q.SET_AUTH_TOKEN,{token:o}),r(q.SET_USER,{user:l}),e.abrupt("return",Ga.push({name:"dashboard"}));case 16:e.prev=16,e.t0=e["catch"](5),r(q.SET_AUTH_TOKEN,{token:null}),r(q.SET_USER,{user:null}),console.error("Login error"),console.error(e.t0);case 22:return e.prev=22,r(q.LOADING,{loading:!1}),e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[5,16,22,25]])})));return function(t,a){return e.apply(this,arguments)}}(),Ma=function(e){var t=e.commit;t(q.SET_AUTH_TOKEN,{token:null}),t(q.SET_USER,{user:null}),Ga.push({name:"login"}).catch((function(){}))},Ka=function(){var e=Object(le["a"])(regeneratorRuntime.mark((function e(t,a){var r,n,i,s,o,l,c,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.state,n=t.commit,i=a.next,s=a.params,console.log("ACTION loadUserInfo"),n(q.LOADING,{loading:!0,message:"Authenticating..."}),o=r.token,Ze(o),e.prev=6,o){e.next=9;break}return e.abrupt("return",Ga.push({name:"login"}).catch((function(){})));case 9:return e.next=11,Xe();case 11:l=e.sent,c=l.user,u=l.token,n(q.SET_USER,{user:c}),n(q.SET_AUTH_TOKEN,{token:u}),Ga.push({name:i||"dashboard",params:s||{}}).catch((function(){})),e.next=26;break;case 19:return e.prev=19,e.t0=e["catch"](6),n(q.SET_AUTH_TOKEN,{token:null}),n(q.SET_USER,{user:null}),console.error("Check auth user error"),console.error(e.t0),e.abrupt("return",Ga.push({name:"login"}).catch((function(){})));case 26:return e.prev=26,n(q.LOADING,{loading:!1}),e.finish(26);case 29:case"end":return e.stop()}}),e,null,[[6,19,26,29]])})));return function(t,a){return e.apply(this,arguments)}}(),Ja=function(){var e=Object(le["a"])(regeneratorRuntime.mark((function e(t,a){var r,n,i,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.state,r=t.commit,n=a.page,i=a.perPage,s=a.filter,console.log("ACTION loadUserInfo"),r(q.LOADING,{loading:!0,message:"Authenticating..."}),e.prev=4,e.next=7,et({page:n,perPage:i,filter:s});case 7:return o=e.sent,r(q.SET_SIGNALS,{signals:o.data}),r(q.SET_AVAILABLE_SIGNALS,{available:o.available}),e.abrupt("return",o);case 13:e.prev=13,e.t0=e["catch"](4),console.error("Check auth user error"),console.error(e.t0);case 17:return e.prev=17,r(q.LOADING,{loading:!1}),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[4,13,17,20]])})));return function(t,a){return e.apply(this,arguments)}}(),Ya=(Fa={},Object(oe["a"])(Fa,F.LOGIN,Ba),Object(oe["a"])(Fa,F.LOGOUT,Ma),Object(oe["a"])(Fa,F.CHECK_AUTH_TOKEN,Ka),Object(oe["a"])(Fa,F.LOAD_SIGNALS,Ja),Fa),Wa=(a("cb29"),Ha={},Object(oe["a"])(Ha,q.LOADING,(function(e,t){var a=t.loading,r=t.message;e.loading=a,e.loadingMessage=r})),Object(oe["a"])(Ha,q.SET_AUTH_TOKEN,(function(e,t){var a=t.token;e.token=a})),Object(oe["a"])(Ha,q.SET_USER,(function(e,t){var a=t.user;e.user=a})),Object(oe["a"])(Ha,q.SET_SIGNALS,(function(e,t){var a=t.signals;e.signals=a.map((function(e){return Object(X["a"])({sparkline:new Array(30).fill(0)},e)}))})),Object(oe["a"])(Ha,q.SET_AVAILABLE_SIGNALS,(function(e,t){var a=t.available;e.available=a})),Ha),za={isLoggedOn:function(e){return!!(e.token&&e.user&&e.user.id)}};r["a"].use(ne["a"]);var Za=new ne["a"].Store({state:se,mutations:Wa,actions:Ya,getters:za,plugins:[Object(ie["a"])({paths:["token"]})]});Za.subscribe((function(e,t){var a=e.type,n=e.payload;if(a===q.SET_AUTH_TOKEN)console.log("Mutation ".concat(a," subscription")),Ze(t.token);else if(a===q.SET_AVAILABLE_SIGNALS){var i=n.available;console.log("Mutation ".concat(q.SET_AVAILABLE_SIGNALS," subscription with available signals ").concat(i.join(","))),ir.send({event:"subscribe_signals",payload:{signals:i}}),ir.send({event:"subscribe_sparklines",payload:{signals:i}}),r["a"].toasted.success("Subscribed to signals")}}));var Qa=Za,Xa=a("b8ce"),er=a.n(Xa),tr=function(e){Object(l["a"])(a,e);var t=Object(c["a"])(a);function a(e){var r;return Object(s["a"])(this,a),r=t.call(this),r.messageId=1,r.ws=new te["a"](e),r.ws.addEventListener("open",(function(){r.emit("open")})),r.ws.addEventListener("close",(function(){r.emit("close")})),r.ws.addEventListener("message",(function(e){var t=e.data,a=JSON.parse(t),n=a.event,i=a.payload;r.emit(n,i)})),r}return Object(o["a"])(a,[{key:"send",value:function(e){e.id||(e.id=this.messageId++),e.token||(e.token=Qa.state.token),re.a.debug("WS.send:: payload: ".concat(JSON.stringify(e))),this.ws.send(JSON.stringify(e))}}]),a}(ee["EventEmitter"]),ar=new tr(We),rr=(new Date).getTime();ar.on("sparkline",(function(e){var t=e.sparkline,a=e.ticker,r=(new Date).getTime();if(r-rr>1e3){rr=r;var n=er()(Qa.state.signals);n.forEach((function(e){e.ticker===a&&(e.sparkline=t)})),Qa.commit(q.SET_SIGNALS,{signals:n})}}));var nr=function(e){console.log("WS.updateSignals:: signals = ".concat(JSON.stringify(e)));var t=er()(Qa.state.signals);e.forEach((function(e){var a=t.findIndex((function(t){return t.id===e.id}));-1!==a?t[a]=Object(X["a"])(Object(X["a"])({},t[a]),e):t.push(e)})),Qa.commit(q.SET_SIGNALS,{signals:t})};ar.on("open",(function(){console.log("Websocket (re)connected"),r["a"].toasted.info("You are online now"),Qa.state.available.length&&(console.log("Resubscribing to existing available signals ".concat(Qa.state.available.join(","))),Qa.commit(q.SET_AVAILABLE_SIGNALS,{available:Qa.state.available}))})),ar.on("close",(function(){console.log("Websocket disconnected"),r["a"].toasted.error("You are offline, reconnecting...")})),ar.on("signals",nr),ar.on("signal",(function(e){return nr([e])}));var ir=ar,sr=function(e){Object(l["a"])(a,e);var t=Object(c["a"])(a);function a(){return Object(s["a"])(this,a),t.apply(this,arguments)}return Object(o["a"])(a,[{key:"handleLogout",value:function(){H(this.$store)}},{key:"hideControls",get:function(){return!this.isLoggedOn||"login"===this.$route.name}}]),a}(d["d"]);Object(u["a"])([Object(p["b"])("isLoggedOn")],sr.prototype,"isLoggedOn",void 0),sr=Object(u["a"])([Object(d["a"])({components:{Loader:x,Drawer:Q}})],sr);var or=sr,lr=or,cr=(a("5c0b"),a("7496")),ur=a("40dc"),dr=a("adda"),pr=a("f6c4"),vr=Object(g["a"])(lr,n,i,!1,null,null,null),fr=vr.exports;_()(vr,{VApp:cr["a"],VAppBar:ur["a"],VBtn:K["a"],VImg:dr["a"],VMain:pr["a"],VSpacer:ye["a"]});var hr=a("9483");Object(hr["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh."),window.location.reload(!0)},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var mr=a("f309");r["a"].use(mr["a"]);var br=new mr["a"]({}),gr=a("a65d"),Or=a.n(gr);r["a"].use(Or.a,{duration:1e3,keepOnHover:!0,position:"bottom-center",fullWidth:!0});var _r=a("01ac");r["a"].use(_r["a"],{lang:"en",filters:{format:"format"},directives:{}});var yr=a("a925"),kr=a("df7f");r["a"].use(yr["a"]);var jr={ru:kr},xr=new yr["a"]({locale:"ru",messages:jr});r["a"].config.productionTip=!1,new r["a"]({router:Ga,store:Qa,vuetify:br,i18n:xr,render:function(e){return e(fr)}}).$mount("#app")},cf05:function(e,t,a){e.exports=a.p+"img/logo.527d3a46.png"},dcf5:function(e,t,a){"use strict";var r=a("176d"),n=a.n(r);n.a},df7f:function(e){e.exports=JSON.parse('{"Signal information":"Информация о сигнале","Entry points":"Точки входа","Take profits":"Take profit","Stop losses":"Stop loss","Comment":"Комментарий","Comments":"Комментарии","Paid signal":"Платный сигнал","Price":"Цена","Recommended volume":"Рекомендованный объём","Risk":"Риск","Terms":"Срочность","Ticker":"Валюта","Type":"Тип","Volume":"Объём","+ Add more":"+ Добавить ещё","High":"Высокий","Long":"Длинный","Low":"Низкий","Medium":"Средний","Short":"Короткий","updated at":"обновлён в","Details":"Подробности","Title":"Название","Currency":"Валюта","Published":"Опубликован","Current price":"Текущая цена","Profitability":"Доходность","Status":"Статус","Triggered price":"Триг.цена","Delayed":"Отложенный","Active":"Активный","Finished":"Отработанный","Cancelled":"Отменённый","Current exit price":"Тек.цена выхода","Signal statuses":"Статусы сигнала","Entry price":"Цена входа","remains in position":"остаток в позиции","Signals":"Сигналы","Channel":"Канал-источник","statusesHelp":"Значения:<ul><li>Отложенный - цена не пересекала уровни входа</li><li>Активный - цена пересекла уровни входа и не пересекла все TP или SL </li><li>Отработал - цена пересекла SL или все TP</li><li>Отмененный - сигнал был отменен</li></ul>","edit":{"paid_signal_hint":"Ваш сигнал будет доступен только платным пользователям","comments_hint":"Разрешить другим пользователям комментировать ваш сигнал","delete_signal_confirm":"Вы уверены, что хотите удалить сигнал? Это действие нельзя будет отменить.","take_profit_must_be_1":"Сумма Take Profit должна быть равна 100%","stop_loss_must_be_1":"Сумма Stop Loss должна быть равна 100%","long_take_profit_must_be_greater_then_entry_points":"Для сигнала \'long\' все Take Profit должны превышать наивысшую точку входа","long_stop_loss_must_be_less_then_entry_points":"Для сигнала \'long\' все Stop Loss не должны превышать низшую точку входа","short_take_profit_must_be_less_then_entry_points":"Для сигнала \'long\' все Take Profit не должны превышать низшую точку входа","short_stop_loss_must_be_greater_then_entry_points":"Для сигнала \'long\' все Stop Loss должны превышать наивысшую точку входа","entry_point_must_exists":"Должна быть задана хотя бы одна точка входа","take_profit_must_exists":"Должен быть задан хотя бы один ордер Take Profit","stop_loss_must_exists":"Должен быть задан хотя бы один ордер Stop Loss","title_hint":"Человекочитаемое название валюты, используется только при отображении","channel_hint":"Название канала или источника. Используется только для отображения."},"preview":{"signal_activated":"Сигнал {title} активирован по цене {price}","signal_level_triggered":"Для сигнала {title} сработали ордера: {orders}"}}')}});
//# sourceMappingURL=app.8a9622e4.js.map